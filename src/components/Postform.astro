---
// src/components/PostForm.astro
import { supabase } from '../lib/supabase';

let title = '';
let content = '';

async function handleSubmit(event) {
  event.preventDefault();

  const { data, error } = await supabase
    .from('posts')
    .insert([{ title, content }]);

  if (error) {
    alert('Error al crear el post: ' + error.message);
  } else {
    alert('Post creado exitosamente');
  }
}
---

<form on:submit={handleSubmit}>
  <label for="title">TÃ­tulo</label>
  <input 
    type="text" 
    id="title" 
    name="title" 
    value={title} 
    onInput={(e) => title = e.target.value} 
    required
  />
  
  <label for="content">Contenido</label>
  <textarea 
    id="content" 
    name="content" 
    value={content} 
    onInput={(e) => content = e.target.value} 
    required
  ></textarea>
  
  <button type="submit">Crear Post</button>
</form>
